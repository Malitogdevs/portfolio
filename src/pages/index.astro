---
import Layout from '../layouts/Layout.astro';
import SwiperItem from '../components/SwiperItem.astro';
import SwiperItemData from '../data/portfolio_items.json';
import HeaderItem from '../components/HeaderItem.astro';

import ThemeSwitch from "../components/ThemeSwitch.astro";
import ThemeDownload from "../components/ThemeDownload.astro";
---

<Layout title="Bienvenidos a mi portfolio.">
	<main>	
		<div class="snap-container">
			<HeaderItem/>
			{
				SwiperItemData.map( (item) => {
					return (
						<SwiperItem
							id={item.id}
							description={item.description}
							title={item.title}
							url={item.url}
							technologies={item.technologies}
							img={item.img}
						/>
					);
				})
			}
		</div>	
		
		<ThemeSwitch />
		<ThemeDownload />
				
	</main>
	
</Layout>

<script>
  const els = document.querySelectorAll(".fade-el");

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("animate-slideUp"); // dispara animaciÃ³n
		entry.target.classList.remove("opacity-0");
      }
    });
  }, { threshold: 0.5 });

  els.forEach(el => observer.observe(el));

  const scrollEl = document.querySelector('.container');
let isDown = false;
let startY, scrollTop;

scrollEl.addEventListener('mousedown', e => {
  isDown = true;
  startY = e.clientY;
  scrollTop = scrollEl.scrollTop;
  e.preventDefault();
});

scrollEl.addEventListener('mouseup', () => isDown = false);
scrollEl.addEventListener('mouseleave', () => isDown = false);

scrollEl.addEventListener('mousemove', e => {
  if (!isDown) return;
  scrollEl.scrollTop = scrollTop - (e.clientY - startY);
});

</script>
<style>
	main {
  position: relative;
  overflow: hidden;
}

main::before,
main::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  filter: blur(60px);
  opacity: 0.8;
  background: radial-gradient(circle at 20% 30%, #ff0080, transparent 40%),
              radial-gradient(circle at 80% 30%, #7928ca, transparent 40%),
              radial-gradient(circle at 50% 50%, #2afadf, transparent 40%),
              radial-gradient(circle at 70% 80%, #00ff6a, transparent 40%),
              radial-gradient(circle at 30% 75%, #ff8c00, transparent 40%),
              radial-gradient(circle at 40% 20%, #ff0080, transparent 40%),
              radial-gradient(circle at 60% 60%, #7928ca, transparent 40%);
}

main::before {
  animation: gradientBG1 25s ease-in-out infinite;
}

main::after {
  animation: gradientBG2 35s ease-in-out infinite;
  mix-blend-mode: screen;
}

@keyframes gradientBG1 {
  0% { transform: scale(1) rotate(0deg); }
  50% { transform: scale(1.05) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}



</style>
